import React, { useEffect, useState } from "react";
import { useCreateOrganizationMutation } from "@/store/organization";
import { useDispatch } from "react-redux";
import { setCurrentOrganization } from "@/store/current_organization";
import { signIn, signOut, useSession } from "next-auth/react";
import ConfirmModal from "../Modal/ConfirmModal";
import { useRouter } from "next/router";
import { useTheme } from "@/hooks/useTheme";

const OrganizationPage = ({ availableOrgs }) => {
  const [currentStep, setCurrentStep] = useState("available");
  const [loading, setLoading] = useState(true);
  const {theme} = useTheme()
  useEffect(() => {
    if (availableOrgs?.length === 0) {
      setCurrentStep("create");
      setLoading(false);
    } else {
      setCurrentStep("available");
      setLoading(false);
    }
  }, [availableOrgs]);

  if (loading) {
    return (
      <div className="flex items-center justify-center w-full min-h-screen">
        <div role="status">
          <svg
            aria-hidden="true"
            className="w-6 h-6 text-primary-text animate-spin fill-accent-foreground"
            viewBox="0 0 100 101"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"
              fill="currentColor"
            />
            <path
              d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"
              fill="currentFill"
            />
          </svg>

          <span className="sr-only">Loading...</span>
        </div>
      </div>
    );
  }

  if (currentStep === "available") {
    return (
      <AvailableOrg
        availableOrgs={availableOrgs}
        setCurrentStep={setCurrentStep}
        theme={theme}
      />
    );
  }

  if (currentStep === "create") {
    return (
      <CreateWorkspace
        handleBack={() => setCurrentStep("available")}
        isOrgAvailable={availableOrgs?.length === 0}
        theme={theme}
      />
    );
  }
};

export default OrganizationPage;

const AvailableOrg = ({ availableOrgs, setCurrentStep, theme }) => {
  const [showConfirmLogout, setShowConfirmLogout] = useState(false);
  const session = useSession();

  const dispatch = useDispatch();

  const handleWorkspace = (org) => {
    if (org) {
      dispatch(
        setCurrentOrganization({
          id: org.id,
          name: org.displayName,
        })
      );
    } else {
      dispatch(setCurrentOrganization(null));
    }
  };

  const handleSignOut = () => {
    localStorage.removeItem("currentOrganization");
    signOut();
  };

  return (
    <div className="flex items-center justify-center w-full min-h-screen px-4 ">
      <div className="flex flex-col w-full max-w-3xl space-y-4 shadow-md p-4 bg-page">
        <div className="flex items-center justify-center">
          {
            theme === 'dark'
              ? <svg
                viewBox="0 0 108 34"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="object-cover w-36 aspect-auto"
              >
                <path
                  d="M43.0199 24.716C41.7719 24.716 40.8279 24.356 40.1879 23.636C39.5639 22.9 39.2519 21.844 39.2519 20.468V8.636C39.2519 8.236 39.3559 7.932 39.5639 7.724C39.7719 7.516 40.0679 7.412 40.4519 7.412C40.8359 7.412 41.1319 7.516 41.3399 7.724C41.5639 7.932 41.6759 8.236 41.6759 8.636V20.324C41.6759 21.124 41.8359 21.724 42.1559 22.124C42.4919 22.508 42.9719 22.7 43.5959 22.7C43.7399 22.7 43.8679 22.7 43.9799 22.7C44.0919 22.684 44.2039 22.668 44.3159 22.652C44.5079 22.636 44.6439 22.692 44.7239 22.82C44.8039 22.932 44.8439 23.172 44.8439 23.54C44.8439 23.876 44.7719 24.14 44.6279 24.332C44.4839 24.508 44.2519 24.62 43.9319 24.668C43.7879 24.684 43.6359 24.692 43.4759 24.692C43.3159 24.708 43.1639 24.716 43.0199 24.716ZM50.3558 24.716C49.1078 24.716 48.1638 24.356 47.5238 23.636C46.8998 22.9 46.5878 21.844 46.5878 20.468V8.636C46.5878 8.236 46.6918 7.932 46.8998 7.724C47.1078 7.516 47.4038 7.412 47.7878 7.412C48.1718 7.412 48.4678 7.516 48.6758 7.724C48.8998 7.932 49.0118 8.236 49.0118 8.636V20.324C49.0118 21.124 49.1718 21.724 49.4918 22.124C49.8278 22.508 50.3078 22.7 50.9318 22.7C51.0758 22.7 51.2038 22.7 51.3158 22.7C51.4278 22.684 51.5398 22.668 51.6518 22.652C51.8438 22.636 51.9798 22.692 52.0598 22.82C52.1398 22.932 52.1798 23.172 52.1798 23.54C52.1798 23.876 52.1078 24.14 51.9638 24.332C51.8198 24.508 51.5878 24.62 51.2678 24.668C51.1238 24.684 50.9718 24.692 50.8118 24.692C50.6518 24.708 50.4998 24.716 50.3558 24.716ZM55.1717 24.668C54.7877 24.668 54.4917 24.564 54.2837 24.356C54.0757 24.132 53.9717 23.828 53.9717 23.444V13.844C53.9717 13.444 54.0757 13.14 54.2837 12.932C54.4917 12.724 54.7797 12.62 55.1477 12.62C55.5317 12.62 55.8197 12.724 56.0117 12.932C56.2197 13.14 56.3237 13.444 56.3237 13.844V15.812L56.0597 15.284C56.3797 14.436 56.8757 13.772 57.5477 13.292C58.2197 12.812 59.0277 12.572 59.9717 12.572C60.9477 12.572 61.7397 12.804 62.3477 13.268C62.9557 13.732 63.3717 14.444 63.5957 15.404H63.2597C63.5637 14.524 64.0837 13.836 64.8197 13.34C65.5557 12.828 66.4117 12.572 67.3877 12.572C68.2837 12.572 69.0197 12.748 69.5957 13.1C70.1717 13.436 70.6037 13.956 70.8917 14.66C71.1797 15.348 71.3237 16.22 71.3237 17.276V23.444C71.3237 23.828 71.2117 24.132 70.9877 24.356C70.7797 24.564 70.4837 24.668 70.0997 24.668C69.7157 24.668 69.4197 24.564 69.2117 24.356C69.0037 24.132 68.8997 23.828 68.8997 23.444V17.396C68.8997 16.404 68.7237 15.676 68.3717 15.212C68.0357 14.748 67.4757 14.516 66.6917 14.516C65.8117 14.516 65.1157 14.82 64.6037 15.428C64.0917 16.036 63.8357 16.876 63.8357 17.948V23.444C63.8357 23.828 63.7317 24.132 63.5237 24.356C63.3157 24.564 63.0197 24.668 62.6357 24.668C62.2517 24.668 61.9477 24.564 61.7237 24.356C61.5157 24.132 61.4117 23.828 61.4117 23.444V17.396C61.4117 16.404 61.2437 15.676 60.9077 15.212C60.5717 14.748 60.0117 14.516 59.2277 14.516C58.3477 14.516 57.6517 14.82 57.1397 15.428C56.6437 16.036 56.3957 16.876 56.3957 17.948V23.444C56.3957 24.26 55.9877 24.668 55.1717 24.668ZM78.4568 24.716C77.6408 24.716 76.9048 24.556 76.2488 24.236C75.6088 23.916 75.1048 23.484 74.7368 22.94C74.3688 22.396 74.1848 21.78 74.1848 21.092C74.1848 20.228 74.4008 19.548 74.8328 19.052C75.2808 18.54 76.0088 18.18 77.0168 17.972C78.0408 17.748 79.4168 17.636 81.1448 17.636H82.2728V19.124H81.1688C80.0168 19.124 79.1048 19.18 78.4328 19.292C77.7608 19.404 77.2808 19.596 76.9928 19.868C76.7208 20.124 76.5848 20.484 76.5848 20.948C76.5848 21.556 76.7928 22.052 77.2088 22.436C77.6248 22.804 78.2008 22.988 78.9368 22.988C79.5288 22.988 80.0488 22.852 80.4968 22.58C80.9448 22.292 81.2968 21.908 81.5528 21.428C81.8248 20.948 81.9608 20.396 81.9608 19.772V17.012C81.9608 16.1 81.7688 15.444 81.3848 15.044C81.0008 14.644 80.3688 14.444 79.4888 14.444C78.9768 14.444 78.4408 14.508 77.8808 14.636C77.3368 14.764 76.7688 14.98 76.1768 15.284C75.9048 15.412 75.6728 15.452 75.4808 15.404C75.2888 15.356 75.1368 15.252 75.0248 15.092C74.9128 14.916 74.8488 14.732 74.8328 14.54C74.8328 14.332 74.8808 14.132 74.9768 13.94C75.0888 13.748 75.2728 13.604 75.5288 13.508C76.2328 13.172 76.9288 12.932 77.6168 12.788C78.3048 12.644 78.9528 12.572 79.5608 12.572C80.6328 12.572 81.5128 12.74 82.2008 13.076C82.9048 13.412 83.4248 13.924 83.7608 14.612C84.0968 15.3 84.2648 16.188 84.2648 17.276V23.444C84.2648 23.828 84.1688 24.132 83.9768 24.356C83.7848 24.564 83.5048 24.668 83.1368 24.668C82.7848 24.668 82.5048 24.564 82.2968 24.356C82.0888 24.132 81.9848 23.828 81.9848 23.444V21.884H82.2008C82.0728 22.476 81.8328 22.988 81.4808 23.42C81.1448 23.836 80.7208 24.156 80.2088 24.38C79.6968 24.604 79.1128 24.716 78.4568 24.716ZM92.5954 24.716C91.6354 24.716 90.8274 24.548 90.1714 24.212C89.5154 23.876 89.0274 23.38 88.7074 22.724C88.3874 22.068 88.2274 21.268 88.2274 20.324V14.66H86.7874C86.4674 14.66 86.2194 14.58 86.0434 14.42C85.8674 14.244 85.7794 14.012 85.7794 13.724C85.7794 13.42 85.8674 13.188 86.0434 13.028C86.2194 12.868 86.4674 12.788 86.7874 12.788H88.2274V10.316C88.2274 9.916 88.3314 9.612 88.5394 9.404C88.7634 9.196 89.0674 9.092 89.4514 9.092C89.8354 9.092 90.1314 9.196 90.3394 9.404C90.5474 9.612 90.6514 9.916 90.6514 10.316V12.788H93.4594C93.7794 12.788 94.0274 12.868 94.2034 13.028C94.3794 13.188 94.4674 13.42 94.4674 13.724C94.4674 14.012 94.3794 14.244 94.2034 14.42C94.0274 14.58 93.7794 14.66 93.4594 14.66H90.6514V20.132C90.6514 20.98 90.8274 21.62 91.1794 22.052C91.5474 22.484 92.1394 22.7 92.9554 22.7C93.2434 22.7 93.4914 22.676 93.6994 22.628C93.9234 22.564 94.1074 22.524 94.2514 22.508C94.4274 22.508 94.5714 22.572 94.6834 22.7C94.7954 22.812 94.8514 23.036 94.8514 23.372C94.8514 23.612 94.8034 23.836 94.7074 24.044C94.6274 24.252 94.4754 24.388 94.2514 24.452C94.0594 24.516 93.7954 24.572 93.4594 24.62C93.1394 24.684 92.8514 24.716 92.5954 24.716ZM101.748 24.716C100.468 24.716 99.3639 24.476 98.4359 23.996C97.5239 23.5 96.8119 22.804 96.2999 21.908C95.8039 20.996 95.5559 19.916 95.5559 18.668C95.5559 17.452 95.8039 16.388 96.2999 15.476C96.7959 14.564 97.4759 13.852 98.3399 13.34C99.2039 12.828 100.188 12.572 101.292 12.572C102.108 12.572 102.836 12.708 103.476 12.98C104.116 13.236 104.66 13.62 105.108 14.132C105.572 14.628 105.916 15.236 106.14 15.956C106.38 16.676 106.5 17.484 106.5 18.38C106.5 18.652 106.42 18.86 106.26 19.004C106.1 19.132 105.86 19.196 105.54 19.196H97.4759V17.708H104.868L104.46 18.044C104.46 17.244 104.34 16.564 104.1 16.004C103.876 15.444 103.532 15.02 103.068 14.732C102.62 14.428 102.06 14.276 101.388 14.276C100.636 14.276 99.9959 14.452 99.4679 14.804C98.9559 15.156 98.5639 15.644 98.2919 16.268C98.0199 16.892 97.8839 17.62 97.8839 18.452V18.596C97.8839 20.004 98.2119 21.068 98.8679 21.788C99.5399 22.492 100.508 22.844 101.772 22.844C102.252 22.844 102.756 22.78 103.284 22.652C103.828 22.524 104.34 22.308 104.82 22.004C105.092 21.844 105.332 21.772 105.54 21.788C105.764 21.804 105.94 21.876 106.068 22.004C106.212 22.132 106.3 22.292 106.332 22.484C106.364 22.676 106.332 22.876 106.236 23.084C106.14 23.276 105.972 23.452 105.732 23.612C105.188 23.98 104.556 24.26 103.836 24.452C103.116 24.628 102.42 24.716 101.748 24.716Z"
                  fill="white"
                />
                <path
                  d="M3.59733 7.07773L8.30108 5.53592C8.31722 5.53032 8.35974 5.49273 8.37523 5.49987C8.39071 5.50701 8.44937 5.46381 8.45835 5.45759L16.47 27.2875C16.4926 27.3492 16.4891 27.4171 16.4603 27.4763C16.4314 27.5355 16.3796 27.5811 16.3161 27.6031L11.7799 29.0856C11.7637 29.0912 11.6701 29.0825 11.6687 29.1576C11.6701 29.0825 11.6325 29.1536 11.6333 29.1576L3.55989 7.16051C3.5566 7.1527 3.55496 7.14433 3.55507 7.13589C3.55518 7.12745 3.55705 7.11912 3.56054 7.11139C3.56403 7.10367 3.56909 7.0967 3.57541 7.09092C3.58173 7.08514 3.58919 7.08065 3.59733 7.07773Z"
                  fill="#8BBDF8"
                />
                <path
                  d="M19.1204 12.2515L15.0801 14.3555L23.1362 28.9837L27.1765 26.8798L19.1204 12.2515Z"
                  fill="#8BBDF8"
                />
                <path
                  d="M19.1191 12.2493L18.3281 19.3472L17.6994 24.9766L17.6668 25.2647C17.3231 27.4748 15.0206 29.1852 12.2322 29.1852C12.0293 29.1852 11.8279 29.1766 11.6309 29.1586L12.6329 20.2128L13.1084 15.9559L13.1358 15.7003C13.135 15.6977 13.135 15.695 13.1358 15.6924C13.3765 14.1901 14.7281 12.8117 16.6247 12.317C17.1964 12.1666 17.7898 12.1092 18.3807 12.147L18.7866 12.1902C18.9014 12.2054 19.011 12.2241 19.1191 12.2493Z"
                  fill="#295EF4"
                />
                <path
                  d="M29.5412 20.3178L29.5153 20.5468L28.9932 25.217L28.9487 25.6239C28.6895 26.949 27.3816 28.2215 25.5508 28.7631C24.8737 28.9674 24.1639 29.0496 23.4564 29.0057L23.1357 28.9726L23.8445 22.6273L24.1407 20.0016L24.1667 19.7654C24.166 19.7638 24.166 19.762 24.1667 19.7604C24.3837 18.3575 25.6256 17.3594 27.0039 17.4314L27.2913 17.4616C28.6747 17.6813 29.639 18.9279 29.5412 20.3178Z"
                  fill="#295EF4"
                />
                <path
                  d="M8.46079 5.46299L7.55799 13.5453L6.1627 26.0508L6.0842 26.7479C5.82054 28.0788 4.91478 29.1108 3.78314 29.347C3.62078 29.3809 3.45521 29.398 3.28916 29.3981C2.9489 29.3974 2.61267 29.3264 2.30268 29.19C1.33989 28.7673 0.62077 27.7497 0.451172 26.5009L0.673353 24.4938L2.31897 9.75008L2.3797 9.20925C2.71223 7.49887 4.37933 5.98726 6.61891 5.55373C7.22477 5.43425 7.84561 5.40366 8.46079 5.46299Z"
                  fill="#295EF4"
                />
              </svg>
              : <svg width="108" height="34" viewBox="0 0 108 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M43.0189 24.716C41.7709 24.716 40.8269 24.356 40.1869 23.636C39.5629 22.9 39.2509 21.844 39.2509 20.468V8.636C39.2509 8.236 39.3549 7.932 39.5629 7.724C39.7709 7.516 40.0669 7.412 40.4509 7.412C40.8349 7.412 41.1309 7.516 41.3389 7.724C41.5629 7.932 41.6749 8.236 41.6749 8.636V20.324C41.6749 21.124 41.8349 21.724 42.1549 22.124C42.4909 22.508 42.9709 22.7 43.5949 22.7C43.7389 22.7 43.8669 22.7 43.9789 22.7C44.0909 22.684 44.2029 22.668 44.3149 22.652C44.5069 22.636 44.6429 22.692 44.7229 22.82C44.8029 22.932 44.8429 23.172 44.8429 23.54C44.8429 23.876 44.7709 24.14 44.6269 24.332C44.4829 24.508 44.2509 24.62 43.9309 24.668C43.7869 24.684 43.6349 24.692 43.4749 24.692C43.3149 24.708 43.1629 24.716 43.0189 24.716ZM50.3548 24.716C49.1068 24.716 48.1628 24.356 47.5228 23.636C46.8988 22.9 46.5868 21.844 46.5868 20.468V8.636C46.5868 8.236 46.6908 7.932 46.8988 7.724C47.1068 7.516 47.4028 7.412 47.7868 7.412C48.1708 7.412 48.4668 7.516 48.6748 7.724C48.8988 7.932 49.0108 8.236 49.0108 8.636V20.324C49.0108 21.124 49.1708 21.724 49.4908 22.124C49.8268 22.508 50.3068 22.7 50.9308 22.7C51.0748 22.7 51.2028 22.7 51.3148 22.7C51.4268 22.684 51.5388 22.668 51.6508 22.652C51.8428 22.636 51.9788 22.692 52.0588 22.82C52.1388 22.932 52.1788 23.172 52.1788 23.54C52.1788 23.876 52.1068 24.14 51.9628 24.332C51.8188 24.508 51.5868 24.62 51.2668 24.668C51.1228 24.684 50.9708 24.692 50.8108 24.692C50.6508 24.708 50.4988 24.716 50.3548 24.716ZM55.1708 24.668C54.7868 24.668 54.4908 24.564 54.2828 24.356C54.0748 24.132 53.9708 23.828 53.9708 23.444V13.844C53.9708 13.444 54.0748 13.14 54.2828 12.932C54.4908 12.724 54.7788 12.62 55.1468 12.62C55.5308 12.62 55.8188 12.724 56.0108 12.932C56.2188 13.14 56.3228 13.444 56.3228 13.844V15.812L56.0588 15.284C56.3788 14.436 56.8748 13.772 57.5468 13.292C58.2188 12.812 59.0268 12.572 59.9708 12.572C60.9468 12.572 61.7388 12.804 62.3468 13.268C62.9548 13.732 63.3708 14.444 63.5948 15.404H63.2588C63.5628 14.524 64.0828 13.836 64.8188 13.34C65.5548 12.828 66.4108 12.572 67.3868 12.572C68.2828 12.572 69.0188 12.748 69.5948 13.1C70.1708 13.436 70.6028 13.956 70.8908 14.66C71.1788 15.348 71.3228 16.22 71.3228 17.276V23.444C71.3228 23.828 71.2108 24.132 70.9868 24.356C70.7788 24.564 70.4828 24.668 70.0988 24.668C69.7148 24.668 69.4188 24.564 69.2108 24.356C69.0028 24.132 68.8988 23.828 68.8988 23.444V17.396C68.8988 16.404 68.7228 15.676 68.3708 15.212C68.0348 14.748 67.4748 14.516 66.6908 14.516C65.8108 14.516 65.1148 14.82 64.6028 15.428C64.0908 16.036 63.8348 16.876 63.8348 17.948V23.444C63.8348 23.828 63.7308 24.132 63.5228 24.356C63.3148 24.564 63.0188 24.668 62.6348 24.668C62.2508 24.668 61.9468 24.564 61.7228 24.356C61.5148 24.132 61.4108 23.828 61.4108 23.444V17.396C61.4108 16.404 61.2428 15.676 60.9068 15.212C60.5708 14.748 60.0108 14.516 59.2268 14.516C58.3468 14.516 57.6508 14.82 57.1388 15.428C56.6428 16.036 56.3948 16.876 56.3948 17.948V23.444C56.3948 24.26 55.9868 24.668 55.1708 24.668ZM78.4558 24.716C77.6398 24.716 76.9038 24.556 76.2478 24.236C75.6078 23.916 75.1038 23.484 74.7358 22.94C74.3678 22.396 74.1838 21.78 74.1838 21.092C74.1838 20.228 74.3998 19.548 74.8318 19.052C75.2798 18.54 76.0078 18.18 77.0158 17.972C78.0398 17.748 79.4158 17.636 81.1438 17.636H82.2718V19.124H81.1678C80.0158 19.124 79.1038 19.18 78.4318 19.292C77.7598 19.404 77.2798 19.596 76.9918 19.868C76.7198 20.124 76.5838 20.484 76.5838 20.948C76.5838 21.556 76.7918 22.052 77.2078 22.436C77.6238 22.804 78.1998 22.988 78.9358 22.988C79.5278 22.988 80.0478 22.852 80.4958 22.58C80.9438 22.292 81.2958 21.908 81.5518 21.428C81.8238 20.948 81.9598 20.396 81.9598 19.772V17.012C81.9598 16.1 81.7678 15.444 81.3838 15.044C80.9998 14.644 80.3678 14.444 79.4878 14.444C78.9758 14.444 78.4398 14.508 77.8798 14.636C77.3358 14.764 76.7678 14.98 76.1758 15.284C75.9038 15.412 75.6718 15.452 75.4798 15.404C75.2878 15.356 75.1358 15.252 75.0238 15.092C74.9118 14.916 74.8478 14.732 74.8318 14.54C74.8318 14.332 74.8798 14.132 74.9758 13.94C75.0878 13.748 75.2718 13.604 75.5278 13.508C76.2318 13.172 76.9278 12.932 77.6158 12.788C78.3038 12.644 78.9518 12.572 79.5598 12.572C80.6318 12.572 81.5118 12.74 82.1998 13.076C82.9038 13.412 83.4238 13.924 83.7598 14.612C84.0958 15.3 84.2638 16.188 84.2638 17.276V23.444C84.2638 23.828 84.1678 24.132 83.9758 24.356C83.7838 24.564 83.5038 24.668 83.1358 24.668C82.7838 24.668 82.5038 24.564 82.2958 24.356C82.0878 24.132 81.9838 23.828 81.9838 23.444V21.884H82.1998C82.0718 22.476 81.8318 22.988 81.4798 23.42C81.1438 23.836 80.7198 24.156 80.2078 24.38C79.6958 24.604 79.1118 24.716 78.4558 24.716ZM92.5944 24.716C91.6344 24.716 90.8264 24.548 90.1704 24.212C89.5144 23.876 89.0264 23.38 88.7064 22.724C88.3864 22.068 88.2264 21.268 88.2264 20.324V14.66H86.7864C86.4664 14.66 86.2184 14.58 86.0424 14.42C85.8664 14.244 85.7784 14.012 85.7784 13.724C85.7784 13.42 85.8664 13.188 86.0424 13.028C86.2184 12.868 86.4664 12.788 86.7864 12.788H88.2264V10.316C88.2264 9.916 88.3304 9.612 88.5384 9.404C88.7624 9.196 89.0664 9.092 89.4504 9.092C89.8344 9.092 90.1304 9.196 90.3384 9.404C90.5464 9.612 90.6504 9.916 90.6504 10.316V12.788H93.4584C93.7784 12.788 94.0264 12.868 94.2024 13.028C94.3784 13.188 94.4664 13.42 94.4664 13.724C94.4664 14.012 94.3784 14.244 94.2024 14.42C94.0264 14.58 93.7784 14.66 93.4584 14.66H90.6504V20.132C90.6504 20.98 90.8264 21.62 91.1784 22.052C91.5464 22.484 92.1384 22.7 92.9544 22.7C93.2424 22.7 93.4904 22.676 93.6984 22.628C93.9224 22.564 94.1064 22.524 94.2504 22.508C94.4264 22.508 94.5704 22.572 94.6824 22.7C94.7944 22.812 94.8504 23.036 94.8504 23.372C94.8504 23.612 94.8024 23.836 94.7064 24.044C94.6264 24.252 94.4744 24.388 94.2504 24.452C94.0584 24.516 93.7944 24.572 93.4584 24.62C93.1384 24.684 92.8504 24.716 92.5944 24.716ZM101.747 24.716C100.467 24.716 99.3629 24.476 98.4349 23.996C97.5229 23.5 96.8109 22.804 96.2989 21.908C95.8029 20.996 95.5549 19.916 95.5549 18.668C95.5549 17.452 95.8029 16.388 96.2989 15.476C96.7949 14.564 97.4749 13.852 98.3389 13.34C99.2029 12.828 100.187 12.572 101.291 12.572C102.107 12.572 102.835 12.708 103.475 12.98C104.115 13.236 104.659 13.62 105.107 14.132C105.571 14.628 105.915 15.236 106.139 15.956C106.379 16.676 106.499 17.484 106.499 18.38C106.499 18.652 106.419 18.86 106.259 19.004C106.099 19.132 105.859 19.196 105.539 19.196H97.4749V17.708H104.867L104.459 18.044C104.459 17.244 104.339 16.564 104.099 16.004C103.875 15.444 103.531 15.02 103.067 14.732C102.619 14.428 102.059 14.276 101.387 14.276C100.635 14.276 99.9949 14.452 99.4669 14.804C98.9549 15.156 98.5629 15.644 98.2909 16.268C98.0189 16.892 97.8829 17.62 97.8829 18.452V18.596C97.8829 20.004 98.2109 21.068 98.8669 21.788C99.5389 22.492 100.507 22.844 101.771 22.844C102.251 22.844 102.755 22.78 103.283 22.652C103.827 22.524 104.339 22.308 104.819 22.004C105.091 21.844 105.331 21.772 105.539 21.788C105.763 21.804 105.939 21.876 106.067 22.004C106.211 22.132 106.299 22.292 106.331 22.484C106.363 22.676 106.331 22.876 106.235 23.084C106.139 23.276 105.971 23.452 105.731 23.612C105.187 23.98 104.555 24.26 103.835 24.452C103.115 24.628 102.419 24.716 101.747 24.716Z" fill="#010616" />
                <path d="M3.59929 7.07773L8.30304 5.53592C8.31918 5.53032 8.36169 5.49273 8.37718 5.49987C8.39266 5.50701 8.45132 5.46381 8.46031 5.45759L16.4719 27.2875C16.4946 27.3492 16.4911 27.4171 16.4622 27.4763C16.4334 27.5355 16.3815 27.5811 16.3181 27.6031L11.7818 29.0856C11.7657 29.0912 11.672 29.0825 11.6707 29.1576C11.672 29.0825 11.6344 29.1536 11.6353 29.1576L3.56185 7.16051C3.55856 7.1527 3.55691 7.14433 3.55703 7.13589C3.55714 7.12745 3.559 7.11912 3.56249 7.11139C3.56599 7.10367 3.57104 7.0967 3.57736 7.09092C3.58368 7.08514 3.59114 7.08065 3.59929 7.07773Z" fill="#8BBDF8" />
                <path d="M19.1263 12.2515L15.0859 14.3555L23.1421 28.9837L27.1824 26.8798L19.1263 12.2515Z" fill="#8BBDF8" />
                <path d="M19.121 12.2493L18.3301 19.3472L17.7013 24.9766L17.6687 25.2647C17.3251 27.4748 15.0225 29.1852 12.2342 29.1852C12.0313 29.1852 11.8298 29.1766 11.6328 29.1586L12.6348 20.2128L13.1103 15.9559L13.1377 15.7003C13.137 15.6977 13.137 15.695 13.1377 15.6924C13.3784 14.1901 14.73 12.8117 16.6267 12.317C17.1984 12.1666 17.7917 12.1092 18.3827 12.147L18.7885 12.1902C18.9033 12.2054 19.0129 12.2241 19.121 12.2493Z" fill="#295EF4" />
                <path d="M29.5461 20.3178L29.5202 20.5468L28.9981 25.217L28.9536 25.6239C28.6944 26.949 27.3865 28.2215 25.5557 28.7631C24.8786 28.9674 24.1688 29.0496 23.4613 29.0057L23.1406 28.9726L23.8494 22.6273L24.1456 20.0016L24.1715 19.7654C24.1709 19.7638 24.1709 19.762 24.1715 19.7604C24.3885 18.3575 25.6305 17.3594 27.0088 17.4314L27.2961 17.4616C28.6796 17.6813 29.6439 18.9279 29.5461 20.3178Z" fill="#295EF4" />
                <path d="M8.46274 5.46299L7.55994 13.5453L6.16465 26.0508L6.08615 26.7479C5.82249 28.0788 4.91673 29.1108 3.78509 29.347C3.62274 29.3809 3.45717 29.398 3.29112 29.3981C2.95085 29.3974 2.61462 29.3264 2.30463 29.19C1.34185 28.7673 0.622723 27.7497 0.453125 26.5009L0.675306 24.4938L2.32092 9.75008L2.38166 9.20925C2.71419 7.49887 4.38128 5.98726 6.62086 5.55373C7.22672 5.43425 7.84756 5.40366 8.46274 5.46299Z" fill="#295EF4" />
              </svg>
          }
        </div>

        <div className="pb-6 text-base font-medium tracking-wider text-center text-primary-text">
          Welcome, {session?.data?.user?.email || ""}
        </div>

        <div className="flex items-center justify-between">
          <p className="text-sm font-normal tracking-wider text-secondary-text">
            YOUR WORKSPACES
          </p>

          <a
            onClick={() => setCurrentStep("create")}
            className="flex items-center justify-center h-8 px-3 space-x-1 text-xs font-semibold tracking-wide rounded-md text-btn-primary-text hover:bg-btn-primary-hover bg-btn-primary"
          >
            <span className="flex items-center justify-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                className="w-4 h-4 fill-white"
              >
                <path d="M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"></path>
              </svg>
            </span>

            <span>Create new workspace</span>
          </a>
        </div>

        <div className="grid sm:grid-cols-2 lg:grid-cols-3 items-center justify-center w-full gap-4 min-h-32">
          {availableOrgs?.map((org) => {
            return (
              <button
                type="button"
                className={`flex w-full  h-fit cursor-pointer space-x-3 p-2 rounded-lg ${theme === 'dark' ? 'bg-page-bg   border-dropdown-border border hover:border-border-active-color' : 'bg-white border border-white hover:border-border-active-color shadow-md'} `}
                onClick={() => handleWorkspace(org)}
              >
                <div className={`min-w-12 h-12 bg-secondary-bg text-3xl flex rounded-full font-medium justify-center items-center uppercase ${theme === 'dark' ? 'text-white' : 'text-user-icon'} `}>
                  {org.displayName.slice(0, 1)}
                </div>

                <div className="flex flex-col w-full space-y-3">
                  <p className="text-xs font-medium tracking-wider text-left text-primary-text">
                    {org.displayName}
                  </p>

                  <div className="flex w-full">
                    {org?.attributes?.membership_tier[0] === "free" && (
                      <span className={`py-1 w-fit rounded-md text-xs font-medium  tracking-wide ${theme === 'dark' ? 'text-[#1BC655]' :'bg-[#E4FFF3] text-[#40AD7D] px-2'}`}>
                        Free
                      </span>
                    )}

                    {org?.attributes?.membership_tier[0] === "enterprise" && (
                      <span className={`py-1 w-fit rounded-md text-xs font-medium  tracking-wide ${theme === 'dark' ? 'text-[#BA7E0F]' : 'bg-[#FFEFE4] text-[#AD7A40] px-2'}`}
                        >
                        Pro
                      </span>
                    )}
                  </div>
                </div>
              </button>
            );
          })}
        </div>

        <div className="flex flex-col w-full space-y-4">
          <p className="text-sm font-normal leading-7 tracking-wide text-center text-secondary-text">
            By creating a workspace you’re agreeing with the{" "}
            <a
              href="https://www.llmate.ai/terms-and-conditions"
              target="_blank"
              className="font-medium cursor-pointer text-secondary-text hover:text-primary-text"
            >
              Terms and Service
            </a>
          </p>

          <div className="flex items-center justify-center">
            <button
              type="button"
              className="text-sm font-medium w-fit leading-7 tracking-wide text-center text-[#B83B3B] hover:text-primary-text cursor-pointer underline"
              onClick={() => setShowConfirmLogout(true)}
            >
              Log out?
            </button>
          </div>
        </div>
      </div>

      <ConfirmModal
        show={showConfirmLogout}
        setShow={setShowConfirmLogout}
        heading="Confirm Logout"
        title={"Are you sure you want to Logout?"}
        description={"You are logged out when you confirm"}
        primaryBtn="Yes, Confirm"
        primaryChange={handleSignOut}
        secondaryBtn="No, keep me in"
        secondaryChange={() => setShowConfirmLogout(false)}
      />
    </div>
  );
};

const CreateWorkspace = ({ handleBack, isOrgAvailable, theme }) => {
  const [workspaceName, setWorkspaceName] = useState("");
  const [keyValue, setKeyValue] = useState("");
  const [errorMessage, setErrorMessage] = useState(null);

  const [createOrganization, { data: res, isLoading, isError, error }] =
    useCreateOrganizationMutation();

  const router = useRouter();

  useEffect(() => {
    router.push("/");
  }, []);

  const refreshAccessToken = () => {
    try {
      signIn("keycloak");
    } catch (error) {
      console.error("Failed to refresh access token", error);
    }

    router.push("/");
  };

  const dispatch = useDispatch();

  const handleCreateWorkspace = () => {
    createOrganization({
      name: workspaceName,
      // openai_preference: {
      //   openai_key_enabled: false,
      //   openai_api_key: keyValue,
      // },
    }).then((response) => {
      if (response.data) {
        dispatch(
          setCurrentOrganization({
            id: response.data.id,
            name: workspaceName,
          })
        );

        setWorkspaceName("");
        // setKeyValue("");
        refreshAccessToken();
      }

      if (response.error) {
        setErrorMessage(response.error.data.message);

        setTimeout(() => {
          setWorkspaceName("");
          // setKeyValue("");
        }, 3000);
      }
    });
  };

  const handleSignOut = () => {
    localStorage.removeItem("currentOrganization");
    signOut();
  };

  return (
    <div className="flex items-center justify-center w-full min-h-screen">
      <div className="flex flex-col w-full space-y-4 max-w-[450px]">
        <div className="flex items-center justify-center">
          {
            theme === 'dark'
              ? <svg
                viewBox="0 0 108 34"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="object-cover w-36 aspect-auto"
              >
                <path
                  d="M43.0199 24.716C41.7719 24.716 40.8279 24.356 40.1879 23.636C39.5639 22.9 39.2519 21.844 39.2519 20.468V8.636C39.2519 8.236 39.3559 7.932 39.5639 7.724C39.7719 7.516 40.0679 7.412 40.4519 7.412C40.8359 7.412 41.1319 7.516 41.3399 7.724C41.5639 7.932 41.6759 8.236 41.6759 8.636V20.324C41.6759 21.124 41.8359 21.724 42.1559 22.124C42.4919 22.508 42.9719 22.7 43.5959 22.7C43.7399 22.7 43.8679 22.7 43.9799 22.7C44.0919 22.684 44.2039 22.668 44.3159 22.652C44.5079 22.636 44.6439 22.692 44.7239 22.82C44.8039 22.932 44.8439 23.172 44.8439 23.54C44.8439 23.876 44.7719 24.14 44.6279 24.332C44.4839 24.508 44.2519 24.62 43.9319 24.668C43.7879 24.684 43.6359 24.692 43.4759 24.692C43.3159 24.708 43.1639 24.716 43.0199 24.716ZM50.3558 24.716C49.1078 24.716 48.1638 24.356 47.5238 23.636C46.8998 22.9 46.5878 21.844 46.5878 20.468V8.636C46.5878 8.236 46.6918 7.932 46.8998 7.724C47.1078 7.516 47.4038 7.412 47.7878 7.412C48.1718 7.412 48.4678 7.516 48.6758 7.724C48.8998 7.932 49.0118 8.236 49.0118 8.636V20.324C49.0118 21.124 49.1718 21.724 49.4918 22.124C49.8278 22.508 50.3078 22.7 50.9318 22.7C51.0758 22.7 51.2038 22.7 51.3158 22.7C51.4278 22.684 51.5398 22.668 51.6518 22.652C51.8438 22.636 51.9798 22.692 52.0598 22.82C52.1398 22.932 52.1798 23.172 52.1798 23.54C52.1798 23.876 52.1078 24.14 51.9638 24.332C51.8198 24.508 51.5878 24.62 51.2678 24.668C51.1238 24.684 50.9718 24.692 50.8118 24.692C50.6518 24.708 50.4998 24.716 50.3558 24.716ZM55.1717 24.668C54.7877 24.668 54.4917 24.564 54.2837 24.356C54.0757 24.132 53.9717 23.828 53.9717 23.444V13.844C53.9717 13.444 54.0757 13.14 54.2837 12.932C54.4917 12.724 54.7797 12.62 55.1477 12.62C55.5317 12.62 55.8197 12.724 56.0117 12.932C56.2197 13.14 56.3237 13.444 56.3237 13.844V15.812L56.0597 15.284C56.3797 14.436 56.8757 13.772 57.5477 13.292C58.2197 12.812 59.0277 12.572 59.9717 12.572C60.9477 12.572 61.7397 12.804 62.3477 13.268C62.9557 13.732 63.3717 14.444 63.5957 15.404H63.2597C63.5637 14.524 64.0837 13.836 64.8197 13.34C65.5557 12.828 66.4117 12.572 67.3877 12.572C68.2837 12.572 69.0197 12.748 69.5957 13.1C70.1717 13.436 70.6037 13.956 70.8917 14.66C71.1797 15.348 71.3237 16.22 71.3237 17.276V23.444C71.3237 23.828 71.2117 24.132 70.9877 24.356C70.7797 24.564 70.4837 24.668 70.0997 24.668C69.7157 24.668 69.4197 24.564 69.2117 24.356C69.0037 24.132 68.8997 23.828 68.8997 23.444V17.396C68.8997 16.404 68.7237 15.676 68.3717 15.212C68.0357 14.748 67.4757 14.516 66.6917 14.516C65.8117 14.516 65.1157 14.82 64.6037 15.428C64.0917 16.036 63.8357 16.876 63.8357 17.948V23.444C63.8357 23.828 63.7317 24.132 63.5237 24.356C63.3157 24.564 63.0197 24.668 62.6357 24.668C62.2517 24.668 61.9477 24.564 61.7237 24.356C61.5157 24.132 61.4117 23.828 61.4117 23.444V17.396C61.4117 16.404 61.2437 15.676 60.9077 15.212C60.5717 14.748 60.0117 14.516 59.2277 14.516C58.3477 14.516 57.6517 14.82 57.1397 15.428C56.6437 16.036 56.3957 16.876 56.3957 17.948V23.444C56.3957 24.26 55.9877 24.668 55.1717 24.668ZM78.4568 24.716C77.6408 24.716 76.9048 24.556 76.2488 24.236C75.6088 23.916 75.1048 23.484 74.7368 22.94C74.3688 22.396 74.1848 21.78 74.1848 21.092C74.1848 20.228 74.4008 19.548 74.8328 19.052C75.2808 18.54 76.0088 18.18 77.0168 17.972C78.0408 17.748 79.4168 17.636 81.1448 17.636H82.2728V19.124H81.1688C80.0168 19.124 79.1048 19.18 78.4328 19.292C77.7608 19.404 77.2808 19.596 76.9928 19.868C76.7208 20.124 76.5848 20.484 76.5848 20.948C76.5848 21.556 76.7928 22.052 77.2088 22.436C77.6248 22.804 78.2008 22.988 78.9368 22.988C79.5288 22.988 80.0488 22.852 80.4968 22.58C80.9448 22.292 81.2968 21.908 81.5528 21.428C81.8248 20.948 81.9608 20.396 81.9608 19.772V17.012C81.9608 16.1 81.7688 15.444 81.3848 15.044C81.0008 14.644 80.3688 14.444 79.4888 14.444C78.9768 14.444 78.4408 14.508 77.8808 14.636C77.3368 14.764 76.7688 14.98 76.1768 15.284C75.9048 15.412 75.6728 15.452 75.4808 15.404C75.2888 15.356 75.1368 15.252 75.0248 15.092C74.9128 14.916 74.8488 14.732 74.8328 14.54C74.8328 14.332 74.8808 14.132 74.9768 13.94C75.0888 13.748 75.2728 13.604 75.5288 13.508C76.2328 13.172 76.9288 12.932 77.6168 12.788C78.3048 12.644 78.9528 12.572 79.5608 12.572C80.6328 12.572 81.5128 12.74 82.2008 13.076C82.9048 13.412 83.4248 13.924 83.7608 14.612C84.0968 15.3 84.2648 16.188 84.2648 17.276V23.444C84.2648 23.828 84.1688 24.132 83.9768 24.356C83.7848 24.564 83.5048 24.668 83.1368 24.668C82.7848 24.668 82.5048 24.564 82.2968 24.356C82.0888 24.132 81.9848 23.828 81.9848 23.444V21.884H82.2008C82.0728 22.476 81.8328 22.988 81.4808 23.42C81.1448 23.836 80.7208 24.156 80.2088 24.38C79.6968 24.604 79.1128 24.716 78.4568 24.716ZM92.5954 24.716C91.6354 24.716 90.8274 24.548 90.1714 24.212C89.5154 23.876 89.0274 23.38 88.7074 22.724C88.3874 22.068 88.2274 21.268 88.2274 20.324V14.66H86.7874C86.4674 14.66 86.2194 14.58 86.0434 14.42C85.8674 14.244 85.7794 14.012 85.7794 13.724C85.7794 13.42 85.8674 13.188 86.0434 13.028C86.2194 12.868 86.4674 12.788 86.7874 12.788H88.2274V10.316C88.2274 9.916 88.3314 9.612 88.5394 9.404C88.7634 9.196 89.0674 9.092 89.4514 9.092C89.8354 9.092 90.1314 9.196 90.3394 9.404C90.5474 9.612 90.6514 9.916 90.6514 10.316V12.788H93.4594C93.7794 12.788 94.0274 12.868 94.2034 13.028C94.3794 13.188 94.4674 13.42 94.4674 13.724C94.4674 14.012 94.3794 14.244 94.2034 14.42C94.0274 14.58 93.7794 14.66 93.4594 14.66H90.6514V20.132C90.6514 20.98 90.8274 21.62 91.1794 22.052C91.5474 22.484 92.1394 22.7 92.9554 22.7C93.2434 22.7 93.4914 22.676 93.6994 22.628C93.9234 22.564 94.1074 22.524 94.2514 22.508C94.4274 22.508 94.5714 22.572 94.6834 22.7C94.7954 22.812 94.8514 23.036 94.8514 23.372C94.8514 23.612 94.8034 23.836 94.7074 24.044C94.6274 24.252 94.4754 24.388 94.2514 24.452C94.0594 24.516 93.7954 24.572 93.4594 24.62C93.1394 24.684 92.8514 24.716 92.5954 24.716ZM101.748 24.716C100.468 24.716 99.3639 24.476 98.4359 23.996C97.5239 23.5 96.8119 22.804 96.2999 21.908C95.8039 20.996 95.5559 19.916 95.5559 18.668C95.5559 17.452 95.8039 16.388 96.2999 15.476C96.7959 14.564 97.4759 13.852 98.3399 13.34C99.2039 12.828 100.188 12.572 101.292 12.572C102.108 12.572 102.836 12.708 103.476 12.98C104.116 13.236 104.66 13.62 105.108 14.132C105.572 14.628 105.916 15.236 106.14 15.956C106.38 16.676 106.5 17.484 106.5 18.38C106.5 18.652 106.42 18.86 106.26 19.004C106.1 19.132 105.86 19.196 105.54 19.196H97.4759V17.708H104.868L104.46 18.044C104.46 17.244 104.34 16.564 104.1 16.004C103.876 15.444 103.532 15.02 103.068 14.732C102.62 14.428 102.06 14.276 101.388 14.276C100.636 14.276 99.9959 14.452 99.4679 14.804C98.9559 15.156 98.5639 15.644 98.2919 16.268C98.0199 16.892 97.8839 17.62 97.8839 18.452V18.596C97.8839 20.004 98.2119 21.068 98.8679 21.788C99.5399 22.492 100.508 22.844 101.772 22.844C102.252 22.844 102.756 22.78 103.284 22.652C103.828 22.524 104.34 22.308 104.82 22.004C105.092 21.844 105.332 21.772 105.54 21.788C105.764 21.804 105.94 21.876 106.068 22.004C106.212 22.132 106.3 22.292 106.332 22.484C106.364 22.676 106.332 22.876 106.236 23.084C106.14 23.276 105.972 23.452 105.732 23.612C105.188 23.98 104.556 24.26 103.836 24.452C103.116 24.628 102.42 24.716 101.748 24.716Z"
                  fill="white"
                />
                <path
                  d="M3.59733 7.07773L8.30108 5.53592C8.31722 5.53032 8.35974 5.49273 8.37523 5.49987C8.39071 5.50701 8.44937 5.46381 8.45835 5.45759L16.47 27.2875C16.4926 27.3492 16.4891 27.4171 16.4603 27.4763C16.4314 27.5355 16.3796 27.5811 16.3161 27.6031L11.7799 29.0856C11.7637 29.0912 11.6701 29.0825 11.6687 29.1576C11.6701 29.0825 11.6325 29.1536 11.6333 29.1576L3.55989 7.16051C3.5566 7.1527 3.55496 7.14433 3.55507 7.13589C3.55518 7.12745 3.55705 7.11912 3.56054 7.11139C3.56403 7.10367 3.56909 7.0967 3.57541 7.09092C3.58173 7.08514 3.58919 7.08065 3.59733 7.07773Z"
                  fill="#8BBDF8"
                />
                <path
                  d="M19.1204 12.2515L15.0801 14.3555L23.1362 28.9837L27.1765 26.8798L19.1204 12.2515Z"
                  fill="#8BBDF8"
                />
                <path
                  d="M19.1191 12.2493L18.3281 19.3472L17.6994 24.9766L17.6668 25.2647C17.3231 27.4748 15.0206 29.1852 12.2322 29.1852C12.0293 29.1852 11.8279 29.1766 11.6309 29.1586L12.6329 20.2128L13.1084 15.9559L13.1358 15.7003C13.135 15.6977 13.135 15.695 13.1358 15.6924C13.3765 14.1901 14.7281 12.8117 16.6247 12.317C17.1964 12.1666 17.7898 12.1092 18.3807 12.147L18.7866 12.1902C18.9014 12.2054 19.011 12.2241 19.1191 12.2493Z"
                  fill="#295EF4"
                />
                <path
                  d="M29.5412 20.3178L29.5153 20.5468L28.9932 25.217L28.9487 25.6239C28.6895 26.949 27.3816 28.2215 25.5508 28.7631C24.8737 28.9674 24.1639 29.0496 23.4564 29.0057L23.1357 28.9726L23.8445 22.6273L24.1407 20.0016L24.1667 19.7654C24.166 19.7638 24.166 19.762 24.1667 19.7604C24.3837 18.3575 25.6256 17.3594 27.0039 17.4314L27.2913 17.4616C28.6747 17.6813 29.639 18.9279 29.5412 20.3178Z"
                  fill="#295EF4"
                />
                <path
                  d="M8.46079 5.46299L7.55799 13.5453L6.1627 26.0508L6.0842 26.7479C5.82054 28.0788 4.91478 29.1108 3.78314 29.347C3.62078 29.3809 3.45521 29.398 3.28916 29.3981C2.9489 29.3974 2.61267 29.3264 2.30268 29.19C1.33989 28.7673 0.62077 27.7497 0.451172 26.5009L0.673353 24.4938L2.31897 9.75008L2.3797 9.20925C2.71223 7.49887 4.37933 5.98726 6.61891 5.55373C7.22477 5.43425 7.84561 5.40366 8.46079 5.46299Z"
                  fill="#295EF4"
                />
              </svg>
              : <svg width="108" height="34" viewBox="0 0 108 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M43.0189 24.716C41.7709 24.716 40.8269 24.356 40.1869 23.636C39.5629 22.9 39.2509 21.844 39.2509 20.468V8.636C39.2509 8.236 39.3549 7.932 39.5629 7.724C39.7709 7.516 40.0669 7.412 40.4509 7.412C40.8349 7.412 41.1309 7.516 41.3389 7.724C41.5629 7.932 41.6749 8.236 41.6749 8.636V20.324C41.6749 21.124 41.8349 21.724 42.1549 22.124C42.4909 22.508 42.9709 22.7 43.5949 22.7C43.7389 22.7 43.8669 22.7 43.9789 22.7C44.0909 22.684 44.2029 22.668 44.3149 22.652C44.5069 22.636 44.6429 22.692 44.7229 22.82C44.8029 22.932 44.8429 23.172 44.8429 23.54C44.8429 23.876 44.7709 24.14 44.6269 24.332C44.4829 24.508 44.2509 24.62 43.9309 24.668C43.7869 24.684 43.6349 24.692 43.4749 24.692C43.3149 24.708 43.1629 24.716 43.0189 24.716ZM50.3548 24.716C49.1068 24.716 48.1628 24.356 47.5228 23.636C46.8988 22.9 46.5868 21.844 46.5868 20.468V8.636C46.5868 8.236 46.6908 7.932 46.8988 7.724C47.1068 7.516 47.4028 7.412 47.7868 7.412C48.1708 7.412 48.4668 7.516 48.6748 7.724C48.8988 7.932 49.0108 8.236 49.0108 8.636V20.324C49.0108 21.124 49.1708 21.724 49.4908 22.124C49.8268 22.508 50.3068 22.7 50.9308 22.7C51.0748 22.7 51.2028 22.7 51.3148 22.7C51.4268 22.684 51.5388 22.668 51.6508 22.652C51.8428 22.636 51.9788 22.692 52.0588 22.82C52.1388 22.932 52.1788 23.172 52.1788 23.54C52.1788 23.876 52.1068 24.14 51.9628 24.332C51.8188 24.508 51.5868 24.62 51.2668 24.668C51.1228 24.684 50.9708 24.692 50.8108 24.692C50.6508 24.708 50.4988 24.716 50.3548 24.716ZM55.1708 24.668C54.7868 24.668 54.4908 24.564 54.2828 24.356C54.0748 24.132 53.9708 23.828 53.9708 23.444V13.844C53.9708 13.444 54.0748 13.14 54.2828 12.932C54.4908 12.724 54.7788 12.62 55.1468 12.62C55.5308 12.62 55.8188 12.724 56.0108 12.932C56.2188 13.14 56.3228 13.444 56.3228 13.844V15.812L56.0588 15.284C56.3788 14.436 56.8748 13.772 57.5468 13.292C58.2188 12.812 59.0268 12.572 59.9708 12.572C60.9468 12.572 61.7388 12.804 62.3468 13.268C62.9548 13.732 63.3708 14.444 63.5948 15.404H63.2588C63.5628 14.524 64.0828 13.836 64.8188 13.34C65.5548 12.828 66.4108 12.572 67.3868 12.572C68.2828 12.572 69.0188 12.748 69.5948 13.1C70.1708 13.436 70.6028 13.956 70.8908 14.66C71.1788 15.348 71.3228 16.22 71.3228 17.276V23.444C71.3228 23.828 71.2108 24.132 70.9868 24.356C70.7788 24.564 70.4828 24.668 70.0988 24.668C69.7148 24.668 69.4188 24.564 69.2108 24.356C69.0028 24.132 68.8988 23.828 68.8988 23.444V17.396C68.8988 16.404 68.7228 15.676 68.3708 15.212C68.0348 14.748 67.4748 14.516 66.6908 14.516C65.8108 14.516 65.1148 14.82 64.6028 15.428C64.0908 16.036 63.8348 16.876 63.8348 17.948V23.444C63.8348 23.828 63.7308 24.132 63.5228 24.356C63.3148 24.564 63.0188 24.668 62.6348 24.668C62.2508 24.668 61.9468 24.564 61.7228 24.356C61.5148 24.132 61.4108 23.828 61.4108 23.444V17.396C61.4108 16.404 61.2428 15.676 60.9068 15.212C60.5708 14.748 60.0108 14.516 59.2268 14.516C58.3468 14.516 57.6508 14.82 57.1388 15.428C56.6428 16.036 56.3948 16.876 56.3948 17.948V23.444C56.3948 24.26 55.9868 24.668 55.1708 24.668ZM78.4558 24.716C77.6398 24.716 76.9038 24.556 76.2478 24.236C75.6078 23.916 75.1038 23.484 74.7358 22.94C74.3678 22.396 74.1838 21.78 74.1838 21.092C74.1838 20.228 74.3998 19.548 74.8318 19.052C75.2798 18.54 76.0078 18.18 77.0158 17.972C78.0398 17.748 79.4158 17.636 81.1438 17.636H82.2718V19.124H81.1678C80.0158 19.124 79.1038 19.18 78.4318 19.292C77.7598 19.404 77.2798 19.596 76.9918 19.868C76.7198 20.124 76.5838 20.484 76.5838 20.948C76.5838 21.556 76.7918 22.052 77.2078 22.436C77.6238 22.804 78.1998 22.988 78.9358 22.988C79.5278 22.988 80.0478 22.852 80.4958 22.58C80.9438 22.292 81.2958 21.908 81.5518 21.428C81.8238 20.948 81.9598 20.396 81.9598 19.772V17.012C81.9598 16.1 81.7678 15.444 81.3838 15.044C80.9998 14.644 80.3678 14.444 79.4878 14.444C78.9758 14.444 78.4398 14.508 77.8798 14.636C77.3358 14.764 76.7678 14.98 76.1758 15.284C75.9038 15.412 75.6718 15.452 75.4798 15.404C75.2878 15.356 75.1358 15.252 75.0238 15.092C74.9118 14.916 74.8478 14.732 74.8318 14.54C74.8318 14.332 74.8798 14.132 74.9758 13.94C75.0878 13.748 75.2718 13.604 75.5278 13.508C76.2318 13.172 76.9278 12.932 77.6158 12.788C78.3038 12.644 78.9518 12.572 79.5598 12.572C80.6318 12.572 81.5118 12.74 82.1998 13.076C82.9038 13.412 83.4238 13.924 83.7598 14.612C84.0958 15.3 84.2638 16.188 84.2638 17.276V23.444C84.2638 23.828 84.1678 24.132 83.9758 24.356C83.7838 24.564 83.5038 24.668 83.1358 24.668C82.7838 24.668 82.5038 24.564 82.2958 24.356C82.0878 24.132 81.9838 23.828 81.9838 23.444V21.884H82.1998C82.0718 22.476 81.8318 22.988 81.4798 23.42C81.1438 23.836 80.7198 24.156 80.2078 24.38C79.6958 24.604 79.1118 24.716 78.4558 24.716ZM92.5944 24.716C91.6344 24.716 90.8264 24.548 90.1704 24.212C89.5144 23.876 89.0264 23.38 88.7064 22.724C88.3864 22.068 88.2264 21.268 88.2264 20.324V14.66H86.7864C86.4664 14.66 86.2184 14.58 86.0424 14.42C85.8664 14.244 85.7784 14.012 85.7784 13.724C85.7784 13.42 85.8664 13.188 86.0424 13.028C86.2184 12.868 86.4664 12.788 86.7864 12.788H88.2264V10.316C88.2264 9.916 88.3304 9.612 88.5384 9.404C88.7624 9.196 89.0664 9.092 89.4504 9.092C89.8344 9.092 90.1304 9.196 90.3384 9.404C90.5464 9.612 90.6504 9.916 90.6504 10.316V12.788H93.4584C93.7784 12.788 94.0264 12.868 94.2024 13.028C94.3784 13.188 94.4664 13.42 94.4664 13.724C94.4664 14.012 94.3784 14.244 94.2024 14.42C94.0264 14.58 93.7784 14.66 93.4584 14.66H90.6504V20.132C90.6504 20.98 90.8264 21.62 91.1784 22.052C91.5464 22.484 92.1384 22.7 92.9544 22.7C93.2424 22.7 93.4904 22.676 93.6984 22.628C93.9224 22.564 94.1064 22.524 94.2504 22.508C94.4264 22.508 94.5704 22.572 94.6824 22.7C94.7944 22.812 94.8504 23.036 94.8504 23.372C94.8504 23.612 94.8024 23.836 94.7064 24.044C94.6264 24.252 94.4744 24.388 94.2504 24.452C94.0584 24.516 93.7944 24.572 93.4584 24.62C93.1384 24.684 92.8504 24.716 92.5944 24.716ZM101.747 24.716C100.467 24.716 99.3629 24.476 98.4349 23.996C97.5229 23.5 96.8109 22.804 96.2989 21.908C95.8029 20.996 95.5549 19.916 95.5549 18.668C95.5549 17.452 95.8029 16.388 96.2989 15.476C96.7949 14.564 97.4749 13.852 98.3389 13.34C99.2029 12.828 100.187 12.572 101.291 12.572C102.107 12.572 102.835 12.708 103.475 12.98C104.115 13.236 104.659 13.62 105.107 14.132C105.571 14.628 105.915 15.236 106.139 15.956C106.379 16.676 106.499 17.484 106.499 18.38C106.499 18.652 106.419 18.86 106.259 19.004C106.099 19.132 105.859 19.196 105.539 19.196H97.4749V17.708H104.867L104.459 18.044C104.459 17.244 104.339 16.564 104.099 16.004C103.875 15.444 103.531 15.02 103.067 14.732C102.619 14.428 102.059 14.276 101.387 14.276C100.635 14.276 99.9949 14.452 99.4669 14.804C98.9549 15.156 98.5629 15.644 98.2909 16.268C98.0189 16.892 97.8829 17.62 97.8829 18.452V18.596C97.8829 20.004 98.2109 21.068 98.8669 21.788C99.5389 22.492 100.507 22.844 101.771 22.844C102.251 22.844 102.755 22.78 103.283 22.652C103.827 22.524 104.339 22.308 104.819 22.004C105.091 21.844 105.331 21.772 105.539 21.788C105.763 21.804 105.939 21.876 106.067 22.004C106.211 22.132 106.299 22.292 106.331 22.484C106.363 22.676 106.331 22.876 106.235 23.084C106.139 23.276 105.971 23.452 105.731 23.612C105.187 23.98 104.555 24.26 103.835 24.452C103.115 24.628 102.419 24.716 101.747 24.716Z" fill="#010616" />
                <path d="M3.59929 7.07773L8.30304 5.53592C8.31918 5.53032 8.36169 5.49273 8.37718 5.49987C8.39266 5.50701 8.45132 5.46381 8.46031 5.45759L16.4719 27.2875C16.4946 27.3492 16.4911 27.4171 16.4622 27.4763C16.4334 27.5355 16.3815 27.5811 16.3181 27.6031L11.7818 29.0856C11.7657 29.0912 11.672 29.0825 11.6707 29.1576C11.672 29.0825 11.6344 29.1536 11.6353 29.1576L3.56185 7.16051C3.55856 7.1527 3.55691 7.14433 3.55703 7.13589C3.55714 7.12745 3.559 7.11912 3.56249 7.11139C3.56599 7.10367 3.57104 7.0967 3.57736 7.09092C3.58368 7.08514 3.59114 7.08065 3.59929 7.07773Z" fill="#8BBDF8" />
                <path d="M19.1263 12.2515L15.0859 14.3555L23.1421 28.9837L27.1824 26.8798L19.1263 12.2515Z" fill="#8BBDF8" />
                <path d="M19.121 12.2493L18.3301 19.3472L17.7013 24.9766L17.6687 25.2647C17.3251 27.4748 15.0225 29.1852 12.2342 29.1852C12.0313 29.1852 11.8298 29.1766 11.6328 29.1586L12.6348 20.2128L13.1103 15.9559L13.1377 15.7003C13.137 15.6977 13.137 15.695 13.1377 15.6924C13.3784 14.1901 14.73 12.8117 16.6267 12.317C17.1984 12.1666 17.7917 12.1092 18.3827 12.147L18.7885 12.1902C18.9033 12.2054 19.0129 12.2241 19.121 12.2493Z" fill="#295EF4" />
                <path d="M29.5461 20.3178L29.5202 20.5468L28.9981 25.217L28.9536 25.6239C28.6944 26.949 27.3865 28.2215 25.5557 28.7631C24.8786 28.9674 24.1688 29.0496 23.4613 29.0057L23.1406 28.9726L23.8494 22.6273L24.1456 20.0016L24.1715 19.7654C24.1709 19.7638 24.1709 19.762 24.1715 19.7604C24.3885 18.3575 25.6305 17.3594 27.0088 17.4314L27.2961 17.4616C28.6796 17.6813 29.6439 18.9279 29.5461 20.3178Z" fill="#295EF4" />
                <path d="M8.46274 5.46299L7.55994 13.5453L6.16465 26.0508L6.08615 26.7479C5.82249 28.0788 4.91673 29.1108 3.78509 29.347C3.62274 29.3809 3.45717 29.398 3.29112 29.3981C2.95085 29.3974 2.61462 29.3264 2.30463 29.19C1.34185 28.7673 0.622723 27.7497 0.453125 26.5009L0.675306 24.4938L2.32092 9.75008L2.38166 9.20925C2.71419 7.49887 4.38128 5.98726 6.62086 5.55373C7.22672 5.43425 7.84756 5.40366 8.46274 5.46299Z" fill="#295EF4" />
              </svg>
          }
        </div>

        <div className="relative w-full max-w-md border rounded-lg bg-dropdown-bg border-border-color">
          <div className="text-sm text-primary-text font-medium tracking-wider flex justify-center items-center py-3 px-4 border-b border-border-color">
            Create New Workspace
          </div>

          <div className="flex flex-col px-4 space-y-4">
            <div className="mt-4 text-sm font-medium tracking-wide text-muted">
              Workspace Name
            </div>

            <div className="w-full">
              <input
                type="text"
                className="w-full h-8 px-4 text-sm font-normal border rounded-md outline-none bg-page border-input-border focus:border-input-border-focus text-input-text placeholder:text-input-placeholder"
                placeholder="Enter here your workspace name..."
                value={workspaceName}
                onChange={(e) => setWorkspaceName(e.target.value)}
              />
            </div>

            {/* <div className="flex flex-col space-y-4">
              <p className="text-sm font-medium tracking-wide text-muted">
                Your OpenAI Key
              </p>

              <input
                type="text"
                className="w-full px-4 py-2.5 text-sm font-normal text-white border-[#313236] rounded-md outline-none placeholder:text-white/40 bg-[#1E2022]"
                value={keyValue}
                placeholder="Enter your own api key to host"
                onChange={(e) => setKeyValue(e.target.value)}
              />
            </div> */}

            <button
              className="px-4 py-2.5 text-sm w-full font-medium rounded-md min-w-28 text-white bg-secondary hover:bg-secondary-foreground disabled:bg-[#193892]/25 disabled:text-white/25"
              onClick={handleCreateWorkspace}
              disabled={workspaceName === ""}
            >
              Create Workspace
            </button>

            {errorMessage && (
              <p className="text-sm font-normal tracking-wide text-red-500">
                {errorMessage}
              </p>
            )}

            <p className="px-6 text-sm font-normal leading-7 tracking-wider text-center text-secondary-text">
              By creating a workspace you’re agreeing with the{" "}
              <a
                href="https://www.llmate.ai/terms-and-conditions"
                target="_blank"
                className="cursor-pointer text-secondary hover:text-primary-text"
              >
                Terms and Service
              </a>
            </p>

            <div className="flex items-center justify-center">
              {/* <button
                type="button"
                className="mb-4 text-xs font-normal leading-7 tracking-wide text-center underline cursor-pointer w-fit text-secondary disabled:text-white/50 hover:text-white disabled:cursor-default"
                onClick={handleBack}
                disabled={isOrgAvailable}
              >
                Take me back
              </button> */}
              <button
                type="button"
                className="text-sm font-medium w-fit leading-7 tracking-wide text-center text-[#B83B3B] hover:text-primary-text cursor-pointer underline mb-2"
                onClick={handleSignOut}
              >
                Log out?
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};
